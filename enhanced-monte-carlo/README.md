# 🧪 Enhanced Monte Carlo (EMC) for LAMMPS Input Generation

This folder documents how to use **EMC (Enhanced Monte Carlo)** to generate LAMMPS-compatible `.data` and `.field` files for molecular dynamics simulations.

We use EMC to pack monomers (e.g., epoxy and hardener) with appropriate force field parameters (e.g., OPLS-AA) and export structured input for LAMMPS simulations.

---

## 📁 Folder Contents

```
my_epoxy.esh              # EMC molecule definition script
build.emc                 # EMC build configuration (autogenerated)
```

---

## 🛠️ How to Use

### 1. Edit the ESH Script

Create a file called `my_epoxy.esh`:

```esh
#!/usr/bin/env emc.pl                      

ITEM OPTIONS
replace     true
ntotal      24
density     0.2
field       opls/2024/opls-aa
ITEM END

ITEM SHORTHAND
epoxy,    C1C(O1)COC2=CC=C(C=C2)CC3=CC=C(C=C3)OCC4CO4,   67   # 16 / 24
hardener, NCCNCCNCCN,                                    33   #  8 / 24
ITEM END
```

Then run the EMC setup script:

```bash
perl emc_setup.pl -replace my_epoxy.esh
```

---

### 2. Edit the Build Script

After running the setup, you’ll get a file called `build.emc`. Edit it to set the number of molecules:

Replace:
```emc
    id		-> epoxy, system -> main, group -> epoxy, n -> n_epoxy},
  cluster	-> {
    id		-> hardener, system -> main, group -> hardener, n -> n_hardener}
```

With:
```emc
    id		-> epoxy, system -> main, group -> epoxy, n -> 16},
  cluster	-> {
    id		-> hardener, system -> main, group -> hardener, n -> 8}
```

---

### 3. Run EMC

Once `build.emc` is configured, run:

```bash
emc -i build.emc
```

---

## 📦 Output Files

After running EMC, you should get:

```
my_epoxy.data         # LAMMPS data file
my_epoxy.params       # Force field parameters
my_epoxy.pdb          # Final structure (optional)
my_epoxy.vmd          # For VMD visualization
my_epoxy.emc          # Internal EMC output
```

---

## 🧬 Example LAMMPS Input

Use this in your `in.lammps` script:

```lammps
units real
atom_style full
read_data my_epoxy.data
include my_epoxy.params

# (Add fixes, pair_style, thermo, etc. here)
```

---

## 🧠 Notes

- Ensure EMC is installed and `emc` is accessible from your shell.
- You can visualize `.pdb` or `.vmd` outputs using VMD or OVITO.

---

## 🔗 References

- [EMC GitHub](https://github.com/uchicago-voth/emc)
- [LAMMPS Documentation](https://docs.lammps.org/)
- [OPLS-AA Force Field Paper](https://doi.org/10.1021/ja9621760)
